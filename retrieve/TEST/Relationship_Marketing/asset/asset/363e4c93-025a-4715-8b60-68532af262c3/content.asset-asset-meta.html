<script runat="server">
  Platform.Load("core","1.1.1")
  try{
</script>
%%[
    SET @skey = "00Q1C00001NzUzNUAV"
    SET @token = lookup('RMT_AccessToken', 'token', 'key', '1')  IF Substring(@skey, 1, 3) == '003'THEN
    SET @cId = RetrieveSalesforceObjects(
        'Contact',
        'Id',
        'Id',
        '=',
        @skey
    )
    IF rowcount(@cId) != 0 THEN
        SET @contactRow = Row(@cId, 1)
        SET @SF_ID = Field(@contactRow, 'Id')
    ENDIF
]%%
<script runat="server">
Platform.Load("Core","1.1.1");
  
var subscriberId = Variable.GetValue("@SF_ID");
var mytoken = Variable.GetValue("@token");
var url = "https://rmt-api.cancercenter.com/api/results/"+subscriberId+"/1";
var headerNames = ["Accept", "Authorization"];
var headerValues = ["application/json", "Bearer "+mytoken];
var status = [0];
var content = Platform.Function.HTTPGet(url,true,0,headerNames,headerValues,status);
if(status[0] == 0) {
Variable.SetValue("@section1",Platform.Response.Write(content));
}
else{
Variable.SetValue("@Status1","error");
}

var subscriberId = Variable.GetValue("@SF_ID");
var mytoken = Variable.GetValue("@token");
var url = "https://rmt-api.cancercenter.com/api/results/"+subscriberId+"/2";
var headerNames = ["Accept", "Authorization"];
var headerValues = ["application/json", "Bearer "+mytoken];
var status = [0];
var content = Platform.Function.HTTPGet(url,true,0,headerNames,headerValues,status);
if(status[0] == 0) {
Variable.SetValue("@section2",Platform.Response.Write(content));
}
else{
Variable.SetValue("@Status2","error");
}

var subscriberId = Variable.GetValue("@SF_ID");
var mytoken = Variable.GetValue("@token");
var url = "https://rmt-api.cancercenter.com/api/results/"+subscriberId+"/3";
var headerNames = ["Accept", "Authorization"];
var headerValues = ["application/json", "Bearer "+mytoken];
var status = [0];
var content = Platform.Function.HTTPGet(url,true,0,headerNames,headerValues,status);
if(status[0] == 0) {
Variable.SetValue("@section3",Platform.Response.Write(content));
}
else{
Variable.SetValue("@Status3","error");
}

var subscriberId = Variable.GetValue("@SF_ID");
var mytoken = Variable.GetValue("@token");
var url = "https://rmt-api.cancercenter.com/api/results/"+subscriberId+"/4";
var headerNames = ["Accept", "Authorization"];
var headerValues = ["application/json", "Bearer "+mytoken];
var status = [0];
var content = Platform.Function.HTTPGet(url,true,0,headerNames,headerValues,status);
if(status[0] == 0) {
Variable.SetValue("@section4",Platform.Response.Write(content));
}
else{
Variable.SetValue("@Status4","error");
}

var subscriberId = Variable.GetValue("@SF_ID");
var mytoken = Variable.GetValue("@token");
var url = "https://rmt-api.cancercenter.com/api/results/"+subscriberId+"/5";
var headerNames = ["Accept", "Authorization"];
var headerValues = ["application/json", "Bearer "+mytoken];
var status = [0];
var content = Platform.Function.HTTPGet(url,true,0,headerNames,headerValues,status);
if(status[0] == 0) {
Variable.SetValue("@section5",Platform.Response.Write(content));
}
else{
Variable.SetValue("@Status5","error");
}

</script>
%%[
    IF Empty(@section1) OR Empty(@section2) OR Empty(@section3) OR Empty(@section4) OR Empty(@section5) OR rowcount(@cId) == 0 THEN
        SET @block = "content is verfied"
        SET @RId = RetrieveSalesforceObjects(
            'Contact',
            'Risk_Assessment_LeadId__c',
            'Id',
            '=',
            @skey
        )
        IF rowcount(@RId) != 0 THEN
            SET @RiskRow = Row(@RId, 1)
            SET @SF_ID = Field(@RiskRow, 'Risk_Assessment_LeadId__c')
        ENDIF
    ENDIF
]%%
<script runat="server">
Platform.Load("Core","1.1.1");
  
var subscriberId = Variable.GetValue("@SF_ID");
var mytoken = Variable.GetValue("@token");
var url = "https://rmt-api.cancercenter.com/api/results/"+subscriberId+"/1";
var headerNames = ["Accept", "Authorization"];
var headerValues = ["application/json", "Bearer "+mytoken];
var status = [0];
var content = Platform.Function.HTTPGet(url,true,0,headerNames,headerValues,status);
if(status[0] == 0) {
Variable.SetValue("@section1",Platform.Response.Write(content));
}
else{
Variable.SetValue("@rmStatus1","error");
}

var subscriberId = Variable.GetValue("@SF_ID");
var mytoken = Variable.GetValue("@token");
var url = "https://rmt-api.cancercenter.com/api/results/"+subscriberId+"/2";
var headerNames = ["Accept", "Authorization"];
var headerValues = ["application/json", "Bearer "+mytoken];
var status = [0];
var content = Platform.Function.HTTPGet(url,true,0,headerNames,headerValues,status);
if(status[0] == 0) {
Variable.SetValue("@section2",Platform.Response.Write(content));
}
else{
Variable.SetValue("@rmStatus2","error");
}

var subscriberId = Variable.GetValue("@SF_ID");
var mytoken = Variable.GetValue("@token");
var url = "https://rmt-api.cancercenter.com/api/results/"+subscriberId+"/3";
var headerNames = ["Accept", "Authorization"];
var headerValues = ["application/json", "Bearer "+mytoken];
var status = [0];
var content = Platform.Function.HTTPGet(url,true,0,headerNames,headerValues,status);
if(status[0] == 0) {
Variable.SetValue("@section3",Platform.Response.Write(content));
}
else{
Variable.SetValue("@rmStatus3","error");
}

var subscriberId = Variable.GetValue("@SF_ID");
var mytoken = Variable.GetValue("@token");
var url = "https://rmt-api.cancercenter.com/api/results/"+subscriberId+"/4";
var headerNames = ["Accept", "Authorization"];
var headerValues = ["application/json", "Bearer "+mytoken];
var status = [0];
var content = Platform.Function.HTTPGet(url,true,0,headerNames,headerValues,status);
if(status[0] == 0) {
Variable.SetValue("@section4",Platform.Response.Write(content));
}
else{
Variable.SetValue("@rmStatus4","error");
}

var subscriberId = Variable.GetValue("@SF_ID");
var mytoken = Variable.GetValue("@token");
var url = "https://rmt-api.cancercenter.com/api/results/"+subscriberId+"/5";
var headerNames = ["Accept", "Authorization"];
var headerValues = ["application/json", "Bearer "+mytoken];
var status = [0];
var content = Platform.Function.HTTPGet(url,true,0,headerNames,headerValues,status);
if(status[0] == 0) {
Variable.SetValue("@section5",Platform.Response.Write(content));
}
else{
Variable.SetValue("@rmStatus5","error");
}
</script>
%%[
ENDIF
IF Empty(@section1) OR Empty(@section2) OR Empty(@section3) OR Empty(@section4) OR Empty(@section5) THEN
ELSEIF @rmStatus1 == "error" OR @rmStatus2 == "error" OR @rmStatus3 == "error" OR @rmStatus4 == "error" OR @rmStatus5 == "error" THEN
ENDIF
IF Substring(@skey,1,3) == '00Q' THEN
    SET @lId = RetrieveSalesforceObjects(
        'Lead',
        'Id',
        'Id',
        '=',
        @skey
    )
    IF rowcount(@lId) != 0 THEN
        SET @LeadRow = Row(@lId, 1)
        SET @SF_ID = Field(@LeadRow, 'Id')
    ENDIF
]%%
<script runat="server">
Platform.Load("Core","1.1.1");
  
var subscriberId = Variable.GetValue("@SF_ID");
var mytoken = Variable.GetValue("@token");
var url = "https://rmt-api.cancercenter.com/api/results/"+subscriberId+"/1";
var headerNames = ["Accept", "Authorization"];
var headerValues = ["application/json", "Bearer "+mytoken];
var status = [0];
var content = Platform.Function.HTTPGet(url,true,0,headerNames,headerValues,status);
if(status[0] == 0) {
Variable.SetValue("@section1",Platform.Response.Write(content));
}
else{
Variable.SetValue("@leadStatus1","error");
}

var subscriberId = Variable.GetValue("@SF_ID");
var mytoken = Variable.GetValue("@token");
var url = "https://rmt-api.cancercenter.com/api/results/"+subscriberId+"/2";
var headerNames = ["Accept", "Authorization"];
var headerValues = ["application/json", "Bearer "+mytoken];
var status = [0];
var content = Platform.Function.HTTPGet(url,true,0,headerNames,headerValues,status);
if(status[0] == 0) {
Variable.SetValue("@section2",Platform.Response.Write(content));
}
else{
Variable.SetValue("@leadStatus2","error");
}

var subscriberId = Variable.GetValue("@SF_ID");
var mytoken = Variable.GetValue("@token");
var url = "https://rmt-api.cancercenter.com/api/results/"+subscriberId+"/3";
var headerNames = ["Accept", "Authorization"];
var headerValues = ["application/json", "Bearer "+mytoken];
var status = [0];
var content = Platform.Function.HTTPGet(url,true,0,headerNames,headerValues,status);
if(status[0] == 0) {
Variable.SetValue("@section3",Platform.Response.Write(content));
}
else{
Variable.SetValue("@leadStatus3","error");
}

var subscriberId = Variable.GetValue("@SF_ID");
var mytoken = Variable.GetValue("@token");
var url = "https://rmt-api.cancercenter.com/api/results/"+subscriberId+"/4";
var headerNames = ["Accept", "Authorization"];
var headerValues = ["application/json", "Bearer "+mytoken];
var status = [0];
var content = Platform.Function.HTTPGet(url,true,0,headerNames,headerValues,status);
if(status[0] == 0) {
Variable.SetValue("@section4",Platform.Response.Write(content));
}
else{
Variable.SetValue("@leadStatus4","error");
}

var subscriberId = Variable.GetValue("@SF_ID");
var mytoken = Variable.GetValue("@token");
var url = "https://rmt-api.cancercenter.com/api/results/"+subscriberId+"/5";
var headerNames = ["Accept", "Authorization"];
var headerValues = ["application/json", "Bearer "+mytoken];
var status = [0];
var content = Platform.Function.HTTPGet(url,true,0,headerNames,headerValues,status);
if(status[0] == 0) {
Variable.SetValue("@section5",Platform.Response.Write(content));
}
else{
Variable.SetValue("@leadStatus5","error");
}
</script>
%%[ ENDIF ]%%
%%=v(@SF_ID)=%%


<script>(function(a,m,i,g,o,s){o=a.createElement(g);s=a.getElementsByTagName(i)[0];o.src=m.origin+m.pathname+"/_t?eventType=CLOUDPAGESVISIT";o.width=0;o.height=0;o.style.display="none";s.appendChild(o);})(document,window.location,"body","img");</script>
	<script src="https:&#x2F;&#x2F;100011367.collect.igodigital.com&#x2F;collect.js"></script>
	<script>
		if (_etmc && typeof _etmc.push === 'function') {
			_etmc.push(['setOrgId', '100011367']);
			_etmc.push(['trackPageView']);
		}
	</script>